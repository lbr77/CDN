;;class FlinkCircle{constructor(url,el){this.init(url,el)}async init(url,el){function LoadBlock(d,e){function f(b,c){let ret;const opt={"Y+":c.getFullYear().toString(),"m+":(c.getMonth()+1).toString(),"d+":c.getDate().toString(),"H+":c.getHours().toString(),"M+":c.getMinutes().toString(),"S+":c.getSeconds().toString()};for(let k in opt){ret=new RegExp("("+k+")").exec(b);if(ret){b=b.replace(ret[1],(ret[1].length==1)?(opt[k]):(opt[k].padStart(ret[1].length,"0")))}};return b}let articleItem=`<div class="fArticleItem"><div class="fArticleAvatar"><a class="fArticlelink fAvatar"target="_blank"rel="noopener nofollow"href="${item.link}"><img src="${item.avatar}"alt="avatar"onerror="this.src='https://cdn.stevelbr.top/usr/uploads/2021-10-02-4d734b.png!/format/webp'; this.onerror = null;"></a><div class="fArticleAuthor">${d.author}</div></div><div class="fArticleMessage"><a class="fArticleTitle"href="${item.link}"target="_blank"rel="noopener nofollow"data-title="${item.title}">${d.title}</a><div class="fArticleTime"><span class="fArticleCreated"><i class="far fa-calendar-alt"></i>Published at ${f("YYYY-mm-dd",new Date(parseInt(d.time)))}</span></div></div></div>`;$(`${e}`).append(articleItem)}async function LoadData(b){saved=JSON.parse(await(await(fetch(b))).text());localStorage.setItem("flinkData",JSON.stringify({time:new Date().getTime(),data:saved}));return saved}let saved=localStorage.getItem("flinkData");if(!saved){saved=await LoadData(url)}else if(((!JSON.parse(saved).data)||(!JSON.parse(saved).time-new Date().getTime()>2678400000))){saved=await LoadData(url)}else{saved=JSON.parse(saved)}function min(b,c){return b>c?c:b}saved=saved.data;console.log(min(20,saved.length));for(let i=0;i<min(20,saved.length);i++){LoadBlock(saved[i],el)}}};;
